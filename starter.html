<html>
  <script>
    var pos = 0;
    const pacArray = [
      ["PacMan1.png", "PacMan2.png"],
      ["PacMan3.png", "PacMan4.png"],
    ];
    var direction = 0;
    const pacMen = []; // This array holds all the pacmen

    function setToRandom(scale) {
      return {
        x: Math.random() * scale,
        y: Math.random() * scale,
      };
    }
    // Factory to make a PacMan at a random position with random velocity
    function makePac() {
      // returns an object with random values scaled {x: 33, y: 21}
      let velocity = setToRandom(10); // {x:?, y:?}
      let position = setToRandom(200);
      // Add image to div id = game
      let game = document.getElementById("game");
      let newimg = document.createElement("img");
      newimg.style.position = "absolute";
      newimg.src = "PacMan1.png";
      newimg.width = 100;
      //
      // set position here
      //
      newimg.style.position.left = position.x;
      newimg.style.position.top = position.y;
      // add new Child image to game
      game.appendChild(newimg);
      // return details in an object
      return {
        position,
        velocity,
        newimg,
      };
    }

    function update() {
      //loop over pacmen array and move each one and move image in DOM
      pacMen.forEach((item) => {
        checkCollisions(item);
        item.position.x += item.velocity.x;
        item.position.y += item.velocity.y;

        item.newimg.style.left = item.position.x;
        item.newimg.style.top = item.position.y;
      });
      setTimeout(update, 20);
    }

    function checkCollisions(item) {
      // detect collision with all walls and make pacman bounce
      //
      if (
        item.position.x + item.velocity.x + item.newimg.width >
          window.innerWidth ||
        item.position.x + item.velocity.x < 0
      ) {
        return (item.velocity.x = -item.velocity.x);
      }
      if (
        item.position.y + item.velocity.y + item.newimg.height >
          window.innerHeight ||
        item.position.y + item.velocity.y < 0
      ) {
        return (item.velocity.y = -item.velocity.y);
      }
    }

    function makeOne() {
      pacMen.push(makePac()); // add a new PacMan
    }
  </script>

  <body>
    <div id="game">
      <button onclick="makeOne()" width="200" height="30">Add PacMan</button>
      <button onclick="update()" width="200" height="30">Start Game</button>
    </div>
  </body>
</html>

<!-- uncomment for separate game ! -->
<!-- <html>
<SCRIPT>
    var pos = 0;
    const pacArray = [
        ['PacMan1.png', 'PacMan2.png'],
        ['PacMan3.png', 'PacMan4.png']
    ];
    var direction = 0;
    var focus = 0;

    function Run() {
        let img = document.getElementById("PacMan");
        let imgWidth = img.width
        focus = (focus + 1) % 2;
        direction = checkPageBounds(direction, imgWidth,pos);
        img.src = pacArray[direction][focus];
        if (direction) {
            pos -= 20;
            img.style.left = pos + "px";
        } else {
            pos += 20;
            img.style.left = pos + 'px';
        }
        // Use setTimeout to call Run every 200 millesecs
       
    }
    setInterval(Run,200)

    function checkPageBounds(direction, imgWidth, pos) {
        //
        // Complete this to reverse direction on hitting page bounds
        // 
       if(imgWidth + pos > 800){
           direction = 1;
       }else if(pos < 0){
           direction = 0;
       }
       return direction;
    }
</SCRIPT>

<body>
    <img id="PacMan" src="PacMan1.png" width='200' onclick="Run()" style="position:absolute"> </img>
</body>

</html> -->
